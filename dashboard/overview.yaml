# Dashboard Overview - Lovelace configuration in YAML
# Easily editable and versionable (git)
# Reload: Settings > Dashboards > ⋮ > Reload dashboards

views:
  # Main Home view
  - path: default_view
    title: Home
    badges:
      - type: entity
        entity: person.alban_pierson
        show_name: true
        show_state: true
        show_icon: true
    cards:
      # Living room
      - type: custom:vertical-stack-in-card
        cards:
          - type: custom:mushroom-template-card
            entity: climate.living_room_thermostatic_valve_thermostat
            icon: mdi:sofa-outline
            primary: Living room
            secondary: "{{ states('sensor.living_room_thermometer_temperature') }}°C"
            tap_action:
              action: navigate
              navigation_path: /home-dashboard/living-room
            features_position: bottom
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                entity: sensor.living_room_thermostatic_valve_hvac_action
                icon: "{% if is_state(entity, 'heating') %} mdi:fire{% elif is_state(entity, 'idle') %} mdi:heating-coil{% else %} mdi:moon-waning-crescent{% endif %}"
                icon_color: "{% if is_state(entity, 'heating') %} red{% else %} grey{% endif %}"
                tap_action:
                  action: more-info
                  entity: climate.living_room_thermostatic_valve_thermostat
              - type: template
                entity: cover.living_room_sunshade
                tap_action:
                  action: more-info
                icon: "{% if is_state(entity, 'open') %} mdi:blinds-open{% elif is_state(entity, 'closed') %} mdi:blinds-vertical-closed{% else %} mdi:window-shutter-alert{% endif %}"
                icon_color: "{% if is_state(entity, 'open') %} blue{% elif is_state(entity, 'closed') %} grey{% else %} orange{% endif %}"
              - type: template
                entity: cover.living_room_shutter
                tap_action:
                  action: more-info
                icon: "{% if is_state(entity, 'open') %} mdi:window-shutter-open{% elif is_state(entity, 'closed') %} mdi:window-shutter{% else %} mdi:window-shutter-alert{% endif %}"
                icon_color: "{% if is_state(entity, 'open') %} blue{% elif is_state(entity, 'closed') %} grey{% else %} orange{% endif %}"
              - type: template
                entity: switch.living_room_outlet_switch
                icon: mdi:floor-lamp
                tap_action:
                  action: toggle
                icon_color: "{% if is_state(entity, 'on') %} orange{% elif is_state(entity, 'off') %} grey{% else %} grey{% endif %}"
              - type: template
                entity: switch.living_room_ceiling_lamp_switch
                icon: mdi:lightbulb
                tap_action:
                  action: toggle
                icon_color: "{% if is_state(entity, 'on') %} orange{% elif is_state(entity, 'off') %} grey{% else %} grey{% endif %}"
            alignment: end
            card_mod:
              style: |
                ha-card {
                  padding-top: 0px;
                  margin-top: -8px;
                  padding-bottom: 8px;
                  padding-left: 8px;
                  padding-right: 8px;
                }

      # Office
      - type: custom:vertical-stack-in-card
        cards:
          - type: custom:mushroom-template-card
            entity: sensor.office_thermometer_temperature
            icon: mdi:microsoft-office
            primary: Office
            secondary: "{{ states('sensor.office_thermometer_temperature') }}°C"
            tap_action:
              action: navigate
              navigation_path: /home-dashboard/office
            features_position: bottom
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                entity: sensor.office_thermostatic_valve_hvac_action
                icon: "{% if is_state(entity, 'heating') %} mdi:fire{% elif is_state(entity, 'idle') %} mdi:heating-coil{% else %} mdi:moon-waning-crescent{% endif %}"
                icon_color: "{% if is_state(entity, 'heating') %} red{% else %} grey{% endif %}"
                tap_action:
                  action: more-info
                  entity: climate.office_thermostatic_valve_thermostat
              - type: template
                entity: cover.office_sunshade
                tap_action:
                  action: more-info
                icon: "{% if is_state(entity, 'open') %} mdi:blinds-open{% elif is_state(entity, 'closed') %} mdi:blinds-vertical-closed{% else %} mdi:window-shutter-alert{% endif %}"
                icon_color: "{% if is_state(entity, 'open') %} blue{% elif is_state(entity, 'closed') %} grey{% else %} orange{% endif %}"
              - type: template
                entity: switch.office_ceiling_lamp_switch
                icon: mdi:lightbulb
                tap_action:
                  action: toggle
                icon_color: "{% if is_state(entity, 'on') %} orange{% elif is_state(entity, 'off') %} grey{% else %} grey{% endif %}"
            alignment: end
            card_mod:
              style: |
                ha-card {
                  padding-top: 0px;
                  margin-top: -8px;
                  padding-bottom: 8px;
                  padding-left: 8px;
                  padding-right: 8px;
                }

      # Restroom
      - type: custom:vertical-stack-in-card
        cards:
          - type: custom:mushroom-template-card
            icon: mdi:paper-roll-outline
            primary: Restroom
            tap_action:
              action: navigate
              navigation_path: /home-dashboard/restroom
            features_position: bottom
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                entity: switch.restroom_ceiling_lamp_switch
                icon: mdi:lightbulb
                tap_action:
                  action: toggle
                icon_color: "{% if is_state(entity, 'on') %} orange{% elif is_state(entity, 'off') %} grey{% else %} grey{% endif %}"
            alignment: end
            card_mod:
              style: |
                ha-card {
                  padding-top: 0px;
                  margin-top: -8px;
                  padding-bottom: 8px;
                  padding-left: 8px;
                  padding-right: 8px;
                }

      # Bedroom
      - type: custom:vertical-stack-in-card
        cards:
          - type: custom:mushroom-template-card
            entity: sensor.bedroom_thermometer_temperature
            icon: mdi:bed-outline
            primary: Bedroom
            secondary: "{{ states('sensor.bedroom_thermometer_temperature') }}°C"
            tap_action:
              action: navigate
              navigation_path: /home-dashboard/bedroom
            features_position: bottom
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                entity: sensor.bedroom_thermostatic_valve_hvac_action
                icon: "{% if is_state(entity, 'heating') %} mdi:fire{% elif is_state(entity, 'idle') %} mdi:heating-coil{% else %} mdi:moon-waning-crescent{% endif %}"
                icon_color: "{% if is_state(entity, 'heating') %} red{% else %} grey{% endif %}"
                tap_action:
                  action: more-info
                  entity: climate.bedroom_thermostatic_valve_thermostat
              - type: template
                entity: cover.bedroom_sunshade
                tap_action:
                  action: more-info
                icon: "{% if is_state(entity, 'open') %} mdi:blinds-open{% elif is_state(entity, 'closed') %} mdi:blinds-vertical-closed{% else %} mdi:window-shutter-alert{% endif %}"
                icon_color: "{% if is_state(entity, 'open') %} blue{% elif is_state(entity, 'closed') %} grey{% else %} orange{% endif %}"
              - type: template
                entity: light.bedroom_bed_led_strip
                icon: mdi:led-strip-variant
                tap_action:
                  action: toggle
                hold_action:
                  action: more-info
                icon_color: "{% if is_state(entity, 'on') %}{% set rgb = state_attr(entity, 'rgb_color') %}{% if rgb %} #{{ '%02x%02x%02x' | format(rgb[0], rgb[1], rgb[2]) }}{% else %} red{% endif %}{% else %} grey{% endif %}"
              - type: template
                entity: switch.bedroom_ceiling_lamp_switch
                icon: mdi:lightbulb
                tap_action:
                  action: toggle
                icon_color: "{% if is_state(entity, 'on') %} orange{% elif is_state(entity, 'off') %} grey{% else %} grey{% endif %}"
            alignment: end
            card_mod:
              style: |
                ha-card {
                  padding-top: 0px;
                  margin-top: -8px;
                  padding-bottom: 8px;
                  padding-left: 8px;
                  padding-right: 8px;
                }

      # Kitchen
      - type: custom:vertical-stack-in-card
        cards:
          - type: custom:mushroom-template-card
            entity: climate.living_room_thermostatic_valve_thermostat
            icon: mdi:coffee-maker-outline
            primary: Kitchen
            secondary: "{{ states('climate.living_room_thermostatic_valve_thermostat') }}°C"
            tap_action:
              action: navigate
              navigation_path: /home-dashboard/living-room
            features_position: bottom
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                entity: cover.kitchen_shutter
                tap_action:
                  action: more-info
                icon: "{% if is_state(entity, 'open') %} mdi:window-shutter-open{% elif is_state(entity, 'closed') %} mdi:window-shutter{% else %} mdi:window-shutter-alert{% endif %}"
                icon_color: "{% if is_state(entity, 'open') %} blue{% elif is_state(entity, 'closed') %} grey{% else %} orange{% endif %}"
              - type: template
                entity: switch.kitchen_led_strip_switch
                icon: mdi:led-strip-variant
                tap_action:
                  action: toggle
                icon_color: "{% if is_state(entity, 'on') %} orange{% elif is_state(entity, 'off') %} grey{% else %} grey{% endif %}"
              - type: template
                entity: switch.kitchen_ceiling_lamp_switch
                icon: mdi:lightbulb
                tap_action:
                  action: toggle
                icon_color: "{% if is_state(entity, 'on') %} orange{% elif is_state(entity, 'off') %} grey{% else %} grey{% endif %}"
            alignment: end
            card_mod:
              style: |
                ha-card {
                  padding-top: 0px;
                  margin-top: -8px;
                  padding-bottom: 8px;
                  padding-left: 8px;
                  padding-right: 8px;
                }

      # Bathroom
      - type: custom:vertical-stack-in-card
        cards:
          - type: custom:mushroom-template-card
            entity: sensor.bathroom_thermometer_temperature
            icon: mdi:bathtub-outline
            primary: Bathroom
            secondary: "{{ states('sensor.bathroom_thermometer_temperature') }}°C"
            tap_action:
              action: navigate
              navigation_path: /home-dashboard/bathroom
            features_position: bottom
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                entity: sensor.bathroom_thermostatic_valve_hvac_action
                icon: "{% if is_state(entity, 'heating') %} mdi:fire{% elif is_state(entity, 'idle') %} mdi:heating-coil{% else %} mdi:moon-waning-crescent{% endif %}"
                icon_color: "{% if is_state(entity, 'heating') %} red{% else %} grey{% endif %}"
                tap_action:
                  action: more-info
                  entity: climate.bathroom_thermostatic_valve_thermostat
              - type: template
                entity: switch.bath_ceiling_lamp_switch
                icon: mdi:led-strip-variant
                tap_action:
                  action: toggle
                icon_color: "{% if is_state(entity, 'on') %} orange{% elif is_state(entity, 'off') %} grey{% else %} grey{% endif %}"
              - type: template
                entity: switch.bath_ceiling_lamp_switch
                icon: mdi:lightbulb
                tap_action:
                  action: toggle
                icon_color: "{% if is_state(entity, 'on') %} orange{% elif is_state(entity, 'off') %} grey{% else %} grey{% endif %}"
            alignment: end
            card_mod:
              style: |
                ha-card {
                  padding-top: 0px;
                  margin-top: -8px;
                  padding-bottom: 8px;
                  padding-left: 8px;
                  padding-right: 8px;
                }

      # Balcony
      - type: custom:vertical-stack-in-card
        cards:
          - type: custom:mushroom-template-card
            entity: sensor.living_room_thermometer_temperature
            icon: mdi:balcony
            primary: Balcony
            secondary: "{{ states('sensor.living_room_thermometer_temperature') }}°C"
            tap_action:
              action: navigate
              navigation_path: /home-dashboard/bathroom
            features_position: bottom
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                entity: switch.balcony_outside_lamp
                icon: mdi:lightbulb
                tap_action:
                  action: toggle
                icon_color: "{% if is_state(entity, 'on') %} orange{% elif is_state(entity, 'off') %} grey{% else %} grey{% endif %}"
            alignment: end
            card_mod:
              style: |
                ha-card {
                  padding-top: 0px;
                  margin-top: -8px;
                  padding-bottom: 8px;
                  padding-left: 8px;
                  padding-right: 8px;
                }

      # Batteries (auto-entities)
      - type: custom:auto-entities
        card:
          type: custom:bar-card
          title_position: inside
          height: 38
          positions:
            icon: inside
            indicator: inside
            name: inside
            value: inside
          show_icon: true
          align: split
          columns: "1"
          max: 100
          unit_of_measurement: "%"
          severity:
            - color: "#d11e1e"
              icon: mdi:battery-10
              from: 0
              to: 5
            - color: "#cf2d11"
              icon: mdi:battery-10
              from: 6
              to: 10
            - color: "#cc3900"
              icon: mdi:battery-20
              from: 11
              to: 15
            - color: "#c84400"
              icon: mdi:battery-20
              from: 16
              to: 20
            - color: "#c44d00"
              icon: mdi:battery-30
              from: 21
              to: 25
            - color: "#bf5600"
              icon: mdi:battery-30
              from: 26
              to: 30
            - color: "#b95f00"
              icon: mdi:battery-40
              from: 31
              to: 35
            - color: "#b36600"
              icon: mdi:battery-40
              from: 36
              to: 40
            - color: "#ac6e00"
              icon: mdi:battery-50
              from: 41
              to: 45
            - color: "#a57500"
              icon: mdi:battery-50
              from: 46
              to: 50
            - color: "#9d7b00"
              icon: mdi:battery-60
              from: 51
              to: 55
            - color: "#948100"
              icon: mdi:battery-60
              from: 56
              to: 60
            - color: "#8b8700"
              icon: mdi:battery-70
              from: 61
              to: 65
            - color: "#818d00"
              icon: mdi:battery-70
              from: 66
              to: 70
            - color: "#769200"
              icon: mdi:battery-80
              from: 71
              to: 75
            - color: "#6a9700"
              icon: mdi:battery-80
              from: 76
              to: 80
            - color: "#5d9c00"
              icon: mdi:battery-90
              from: 81
              to: 85
            - color: "#4da100"
              icon: mdi:battery-90
              from: 86
              to: 90
            - color: "#39a500"
              icon: mdi:battery-check
              from: 91
              to: 95
            - color: "#15a911"
              icon: mdi:battery-check
              from: 96
              to: 100
          card_mod:
            style: |
              bar-card-currentbar, bar-card-current, bar-card-backgroundbar {
                height: 5px !important;
                margin-top: 35px;
                border-radius: 10px !important;
              }
              bar-card-iconbar {
                margin-bottom: 5px;
              }
        filter:
          include:
            - entity_id: "^sensor.*_battery$"
              state: "<100"
        sort:
          method: state
          numeric: true
          reverse: false

      # Alban Desktop PC
      - type: custom:mushroom-template-card
        primary: Alban PC Fixe
        entity: switch.alban_pc_fixe
        secondary: "{% if is_state(entity, 'on') %} En ligne ({{ states('sensor.hass_pc_fixe_cpuload') | round(0) }}% CPU){% else %} Hors ligne{% endif %}"
        icon: mdi:desktop-tower
        icon_color: "{% if is_state(entity, 'on') %} blue{% else %} grey{% endif %}"
        tap_action:
          action: call-service
          service: script.toggle_on_off_pc_fix
        hold_action:
          action: more-info

      # Calendar
      - type: calendar
        entities:
          - calendar.pro_pierson_alban_gmail_com

  # Living room view (sections - Apple Home Dashboard)
  - type: sections
    path: living-room
    icon: mdi:sofa-outline
    max_columns: 4
    subview: true
    header:
      card:
        type: heading
        heading: Living room
        heading_style: title
        icon: mdi:sofa-outline
        badges:
          - type: entity
            entity: sensor.thermometer_desktop_temperature
          - type: entity
            entity: sensor.thermometer_desktop_humidity
    sections:
      - type: grid
        cards:
          - type: heading
            heading: New section
          - type: custom:mushroom-cover-card
            entity: cover.living_room_shutter
            show_tilt_position_control: true
            show_buttons_control: true
            show_position_control: false
            fill_container: false
      - type: grid
        cards:
          - type: heading
            heading: New section
          - type: thermostat
            entity: climate.living_room_thermostatic_valve_thermostat
