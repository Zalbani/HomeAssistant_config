title: Home
icon: mdi:home
path: home
type: sections
max_columns: 4

header:
  card:
    type: custom:mushroom-chips-card
    chips:
      - type: template
        entity: person.alban_pierson
        icon: mdi:account
        content: Alban
        icon_color: "{{ 'green' if is_state('person.alban_pierson', 'home') else 'grey' }}"
        tap_action:
          action: more-info

      - type: conditional
        conditions:
          - condition: template
            value_template: >
              {{ states('binary_sensor.living_room_french_window') == 'on' }}
        chip:
          type: template
          icon: mdi:window-open-variant
          icon_color: orange
          content: >
            {% set open = [] %}
            {% if is_state('binary_sensor.living_room_french_window', 'on') %}
              {% set open = open + ['Living room'] %}
            {% endif %}
            {{ open | join(', ') }}
          tap_action:
            action: more-info
            entity: binary_sensor.living_room_french_window

      - type: conditional
        conditions:
          - condition: state
            entity: switch.alban_pc_fixe
            state: "on"
        chip:
          type: template
          entity: switch.alban_pc_fixe
          icon: mdi:desktop-tower
          icon_color: blue
          content: "{{ states('sensor.hass_pc_fixe_cpuload') | round(0) }}%"
          tap_action:
            action: navigate
            navigation_path: /overview-dashboard/office

      - type: conditional
        conditions:
          - condition: template
            value_template: >
              {{ states | selectattr('entity_id', 'match', '^sensor.*_battery$')
                         | selectattr('state', 'lt', '20')
                         | list | count > 0 }}
        chip:
          type: template
          icon: mdi:battery-alert
          icon_color: red
          content: >
            {{ states | selectattr('entity_id', 'match', '^sensor.*_battery$')
                       | selectattr('state', 'lt', '20')
                       | list | count }}
          tap_action:
            action: navigate
            navigation_path: /overview-dashboard/maintenance

      - type: template
        icon: mdi:wrench
        icon_color: grey
        tap_action:
          action: navigate
          navigation_path: /overview-dashboard/maintenance

sections:
  - cards:
      - type: vertical-stack
        cards:
          - !include ../cards/weather_card.yaml
          - !include ../cards/heating_overview_card.yaml

  - cards:
      - type: horizontal-stack
        cards:
          - !include ../rooms/bedroom/overview_card.yaml
          - !include ../rooms/office/overview_card.yaml

      - type: horizontal-stack
        cards:
          - !include ../rooms/living_room/overview_card.yaml
          - !include ../rooms/kitchen/overview_card.yaml

      - type: horizontal-stack
        cards:
          - !include ../rooms/balcony/overview_card.yaml
          - !include ../rooms/entry/overview_card.yaml

      - type: horizontal-stack
        cards:
          - !include ../rooms/bathroom/overview_card.yaml
          - !include ../rooms/restroom/overview_card.yaml
