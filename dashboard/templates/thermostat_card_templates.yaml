thermostat_card:
  show_name: true
  show_state: false
  show_icon: false
  tap_action:
    action: more-info
  styles:
    card:
      - height: 140px
      - border-radius: 20px
      - padding: 16px
      - border: 1px solid rgba(255, 255, 255, 0.08)
      - background: >
          [[[
            const action = states[variables.hvac_action_sensor]?.state;
            if (action === 'heating') {
              return 'linear-gradient(135deg, rgba(255, 87, 34, 0.2) 0%, rgba(244, 67, 54, 0.1) 100%)';
            }
            return 'rgba(var(--rgb-card-background-color), 0.4)';
          ]]]
    grid:
      - grid-template-areas: '"n n" "temp controls" "status status"'
      - grid-template-columns: 1fr auto
      - grid-template-rows: min-content 1fr min-content
      - gap: 8px
    name:
      - justify-self: start
      - font-size: 16px
      - font-weight: 600
      - margin-bottom: 4px
    custom_fields:
      temp:
        - justify-self: start
        - align-self: center
      controls:
        - justify-self: end
        - align-self: center
      status:
        - justify-self: start
        - font-size: 12px
        - opacity: 0.7
        - margin-top: 8px
  custom_fields:
    temp: |
      [[[
        const climate = states[variables.climate_entity];
        const current = climate?.attributes.current_temperature || 'â€”';
        const target = climate?.attributes.temperature || 'â€”';
        const action = states[variables.hvac_action_sensor]?.state;
        
        const iconColor = action === 'heating' ? '#FF5722' : 
                         action === 'idle' ? '#2196F3' : '#9E9E9E';
        const icon = action === 'heating' ? 'mdi:fire' : 
                    action === 'idle' ? 'mdi:snowflake' : 'mdi:power-off';
        
        return `
          <div style="display: flex; align-items: center; gap: 12px;">
            <ha-icon icon="${icon}" style="width: 36px; height: 36px; color: ${iconColor};"></ha-icon>
            <div>
              <div style="font-size: 32px; font-weight: 700; line-height: 1; color: white;">${current}Â°</div>
              <div style="font-size: 13px; opacity: 0.6; margin-top: 2px;">Target: ${target}Â°C</div>
            </div>
          </div>
        `;
      ]]]
    controls: |
      [[[
        return `
          <div style="display: flex; gap: 8px;">
            <button onclick="event.stopPropagation(); hass.callService('climate', 'set_temperature', {entity_id: '${variables.climate_entity}', temperature: parseFloat(hass.states['${variables.climate_entity}'].attributes.temperature) - 0.5});" 
                    style="width: 40px; height: 40px; border-radius: 50%; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; font-size: 20px; cursor: pointer;">
              âˆ’
            </button>
            <button onclick="event.stopPropagation(); hass.callService('climate', 'set_temperature', {entity_id: '${variables.climate_entity}', temperature: parseFloat(hass.states['${variables.climate_entity}'].attributes.temperature) + 0.5});" 
                    style="width: 40px; height: 40px; border-radius: 50%; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; font-size: 20px; cursor: pointer;">
              +
            </button>
          </div>
        `;
      ]]]
    status: |
      [[[
        const action = states[variables.hvac_action_sensor]?.state;
        const statusText = action === 'heating' ? 'ğŸ”¥ Currently heating' : 
                          action === 'idle' ? 'ğŸ’¤ Idle' : 
                          'â¹ï¸ Stopped';
        const color = action === 'heating' ? '#FF5722' : 
                     action === 'idle' ? '#2196F3' : '#9E9E9E';
        
        return `<div style="color: ${color}; font-weight: 500;">${statusText}</div>`;
      ]]]
